<!DOCTYPE html>
<html>
<head>
  <title>Login and Signup</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
  </script>
<script src="https://code.jquery.com/jquery-3.7.0.min.js"
  integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="/CSS/styles.css">
  <link rel="stylesheet" href="/CSS/index.css">
  <script src="/js/script.js"></script>
</head>
<body>
<!-- <header>
    </header> 
   -->    <div class="container">
    <div class="form-container">
      <div class="form-toggle">
        <button id="login-btn" class="active" onclick="toggleForm('login')">Login</button>
        <button id="signup-btn" onclick="toggleForm('signup')">Signup</button>
      </div>

      <form id="login-form" class="active-form">
        <h2>Login</h2>
        <div class="input-container">
          <input type="text" placeholder="Email" id="email-login" required>
        </div>
        <div class="input-container">
          <input type="password" placeholder="Password" id="password-login"required>
        </div>
     <div class="radio-container">
          <label>
            <input type="radio" name="login-user-type" value="enduser" id="enduser-login"checked>
            End User
          </label>
          <label>
            <input type="radio" name="login-user-type" id="admin-login"value="admin">
            Admin
          </label>
        </div>

        <center> <a href="#" >Forget password?</a></center><br>
         
        <button type="submit">Login</button>
      </form>

      <form id="signup-form">
        <h2>Signup</h2>
        <div class="input-container">
          <input type="text" id="username" placeholder="Username" required>
        </div>
        <div class="input-container">
          <input type="email" id="email" placeholder="Email" required>
        </div>
        <div class="input-container">
          <input type="tel" id="number" placeholder="Phone Number" required>
        </div>
        <div class="input-container">
          <input type="password" id="password" placeholder="Password" required>
        </div>
        <div class="input-container">
          <input type="password" id="confirm-password" placeholder="Confirm Password" required>
        </div>
        
        <div class="radio-container">
          <label>
            <input type="radio" id="enduser-registration" name="signup-user-type" value="enduser" checked>
            End User
          </label>
          <label>
            <input type="radio"  id="admin-registration" name="signup-user-type" value="admin">
            Admin
          </label>
        </div>
       
        <button type="submit">Signup</button>
      </form>
    </div>
  </div>
</body>
<script>
	fetch("./header.html")
  .then(response => {
    return response.text()
  })
  
  .then(data => {
    document.querySelector("header").innerHTML = data;
    document.querySelector("#searchbar").style.$(Styles);
    document.querySelector("#searchbtn").style.width="100px";
    const Styles = {
    	display:"flex",
    	flexDirection:"column",
    	
    }
    if(localStorage.userName){
      
      if(localStorage.role=='admin'){
        console.log("hii "+localStorage.role);
        $("#admin").css("display","block");
      }
      $("#signup-login").hide();
      $("#username").show();
      $("#username-text").text(localStorage.userName);
      function logoutFunction(){
       console.log("hii");
  }
    }
    else{
      $("#signup-login").show();
      $("#username").hide();
    }
    
  });
  function logoutFuction(){
      if(confirm("You will get logout")){
        $.ajax({
          url:"http://localhost:8080/logout",
          data:{id:localStorage.userId},
          success:function(response){
            $("#signup-login").show();
            $("#username").hide();
            $("#admin").hide();
            localStorage.clear();
          }
        })
      }
    }

</script>
</html>
